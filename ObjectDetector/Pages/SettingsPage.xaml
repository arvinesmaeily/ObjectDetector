<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ObjectDetector.Pages.SettingsPage"
             Title="Settings"
             BackgroundColor="{AppThemeBinding Light=White, Dark=#121212}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <Label Text="Settings"
                   FontSize="24"
                   FontAttributes="Bold"
                   Margin="0,0,0,20"
                   TextColor="{AppThemeBinding Light=Black, Dark=White}" />

            <!-- Storage Settings -->
            <Frame Padding="15"
                   BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}"
                   BorderColor="{AppThemeBinding Light=#DDDDDD, Dark=#333333}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Storage"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" />

                    <Button x:Name="OpenFolderButton"
                            Text="ðŸ“ Open Saved Images Folder"
                            Clicked="OnOpenFolderClicked"
                            BackgroundColor="#28A745"
                            TextColor="White"
                            HorizontalOptions="Fill" />
                </VerticalStackLayout>
            </Frame>

            <!-- Detection Settings -->
            <Frame Padding="15"
                   BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}"
                   BorderColor="{AppThemeBinding Light=#DDDDDD, Dark=#333333}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Detection Settings"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" />

                    <Label Text="Confidence Threshold"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    <HorizontalStackLayout Spacing="10">
                        <Slider x:Name="ConfidenceSlider"
                                Minimum="0"
                                Maximum="1"
                                Value="0.25"
                                WidthRequest="250"
                                ValueChanged="OnConfidenceChanged" />
                        <Label x:Name="ConfidenceLabel"
                               Text="0.25"
                               VerticalOptions="Center"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    </HorizontalStackLayout>

                    <Label Text="IoU Threshold (NMS)"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    <HorizontalStackLayout Spacing="10">
                        <Slider x:Name="IouSlider"
                                Minimum="0.1"
                                Maximum="0.9"
                                Value="0.45"
                                WidthRequest="250"
                                ValueChanged="OnIouChanged" />
                        <Label x:Name="IouLabel"
                               Text="0.45"
                               VerticalOptions="Center"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    </HorizontalStackLayout>

                    <Label Text="UI Scale Factor"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    <HorizontalStackLayout Spacing="10">
                        <Slider x:Name="UiScaleSlider"
                                Minimum="0.3"
                                Maximum="1.5"
                                Value="0.7"
                                WidthRequest="250"
                                ValueChanged="OnUiScaleChanged" />
                        <Label x:Name="UiScaleLabel"
                               Text="0.70"
                               VerticalOptions="Center"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    </HorizontalStackLayout>
                    <Label Text="Adjusts the size of bounding boxes and labels"
                           FontSize="12"
                           TextColor="{AppThemeBinding Light=#666666, Dark=#BBBBBB}" />
                </VerticalStackLayout>
            </Frame>

            <!-- Appearance Settings -->
            <Frame Padding="15"
                   BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}"
                   BorderColor="{AppThemeBinding Light=#DDDDDD, Dark=#333333}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Appearance"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" />

                    <Label Text="Theme"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    <Picker x:Name="ThemePicker"
                            SelectedIndexChanged="OnThemeChanged"
                            TextColor="{AppThemeBinding Light=Black, Dark=White}"
                            BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#2D2D2D}">
                        <Picker.Items>
                            <x:String>System Default</x:String>
                            <x:String>Light</x:String>
                            <x:String>Dark</x:String>
                        </Picker.Items>
                    </Picker>
                </VerticalStackLayout>
            </Frame>

            <!-- Display Settings -->
            <Frame Padding="15"
                   BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}"
                   BorderColor="{AppThemeBinding Light=#DDDDDD, Dark=#333333}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Display Settings"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" />

                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Keep Screen Alive"
                               VerticalOptions="Center"
                               HorizontalOptions="StartAndExpand"
                               TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                        <Switch x:Name="KeepScreenAliveSwitch"
                                Toggled="OnKeepScreenAliveToggled" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- App Information -->
            <Frame Padding="15"
                   BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}"
                   BorderColor="{AppThemeBinding Light=#DDDDDD, Dark=#333333}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="About"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    <Label Text="Object Detector"
                           FontSize="16"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" />
                    <Label Text="Version 1.0.0"
                           FontSize="14"
                           TextColor="{AppThemeBinding Light=#666666, Dark=#BBBBBB}" />
                    <Label Text="Powered by YOLOv11"
                           FontSize="14"
                           TextColor="{AppThemeBinding Light=#666666, Dark=#BBBBBB}" />
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>